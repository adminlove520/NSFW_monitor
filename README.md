
# ğŸ“¢ RSS Monitor

> ä¸€ä¸ªè½»é‡çº§ã€æ¨¡å—åŒ–çš„ RSS è®¢é˜…ç›‘æ§å·¥å…·ï¼Œé€šè¿‡ Discord Webhook å‘é€å¸¦æœ‰ç²¾ç¾ Embed æ ·å¼å’Œå›¾ç‰‡é¢„è§ˆçš„é€šçŸ¥ã€‚

å½“å‰ç‰ˆæœ¬ï¼š**V1.0.7**
ç‰ˆæœ¬æ›´æ–°æ—¶é—´ï¼š2026-01-06

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

*   **æ™ºèƒ½å›¾ç‰‡é¢„è§ˆ**ï¼šè‡ªåŠ¨æå– RSS æ–‡ç« ä¸­çš„å›¾ç‰‡ï¼ˆé™„ä»¶ã€åª’ä½“å†…å®¹æˆ–æ­£æ–‡å›¾ç‰‡ï¼‰ï¼Œåœ¨ Discord æ¨é€ä¸­å¤§å›¾å±•ç¤ºã€‚
*   **æŠ—å°é”æœºåˆ¶**ï¼š
    *   **429 é‡è¯•**ï¼šé‡åˆ°åçˆ¬è™«é™åˆ¶ï¼ˆToo Many Requestsï¼‰æ—¶è‡ªåŠ¨é€€é¿é‡è¯•ã€‚
    *   **å¾ªç¯æ¨¡å¼**ï¼šGitHub Actions æ¯æ¬¡è¿è¡Œ 45 åˆ†é’Ÿï¼Œé€šè¿‡ `--time-limit` å‚æ•°ä¼˜é›…é€€å‡ºå¹¶ä¿å­˜æ•°æ®åº“ï¼Œç¡®ä¿æŒç»­ç›‘æ§ã€‚
*   **Discord æ·±åº¦é›†æˆ**ï¼š
    *   ä½¿ç”¨ Embeds æ ·å¼ï¼Œç¾è§‚å¤§æ–¹ã€‚
    *   æ”¯æŒè‡ªå®šä¹‰é¢œè‰²ï¼ˆéšæœºç”Ÿæˆï¼‰ã€Footer æ—¶é—´æˆ³ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰ã€‚
*   **è‡ªåŠ¨åŒ–éƒ¨ç½²**ï¼š
    *   æ”¯æŒ **GitHub Actions** å…è´¹è¿è¡Œã€‚
    *   æ”¯æŒ **Docker/Zeabur** å®¹å™¨åŒ–éƒ¨ç½²ã€‚
*   **æ•°æ®æŒä¹…åŒ–**ï¼šä½¿ç”¨ SQLite è®°å½•å·²æ¨é€æ¡ç›®ï¼Œé˜²æ­¢é‡å¤æ‰“æ‰°ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å‡†å¤‡é…ç½®

åˆ›å»ºæˆ–ä¿®æ”¹ `rss.yaml`ï¼Œå¡«å…¥ä½ æƒ³ç›‘æ§çš„ RSS æºï¼š

```yaml
"æŠ€æœ¯ç¤¾åŒº":
  "rss_url": "https://rsshub.app/t66y/7"
  "website_name": "T66yæŠ€æœ¯"

"Pornhub - å›½äº§":
  "rss_url": "https://rssmonitor.zeabur.app/pornhub/search/%E5%9B%BD%E4%BA%A7"
  "website_name": "Pornhub - å›½äº§"
```

### 2. æœ¬åœ°è¿è¡Œ

å®‰è£…ä¾èµ–å¹¶å¯åŠ¨ï¼š

```bash
pip install -r requirements.txt
python Rss_monitor.py
```

---

## ğŸ› ï¸ éƒ¨ç½²æŒ‡å—

### æ–¹å¼ä¸€ï¼šGitHub Actions (å…è´¹)

æœ¬é¡¹ç›®å†…ç½®äº†è‡ªåŠ¨åŒ–å·¥ä½œæµï¼ŒFork åå³å¯ä½¿ç”¨ã€‚

1.  **Fork** æœ¬ä»“åº“ã€‚
2.  è¿›å…¥ä»“åº“ **Settings** -> **Secrets** -> **Actions**ã€‚
3.  é…ç½®ç¯å¢ƒå˜é‡ï¼š
    *   `DISCARD_WEBHOOK`: ä½ çš„ Discord Webhook åœ°å€ã€‚
4.  (å¯é€‰) ä¿®æ”¹ `.github/workflows/rss_monitor.yml` è°ƒæ•´å®šæ—¶é¢‘ç‡ï¼ˆé»˜è®¤æ¯ 2 å°æ—¶è¿è¡Œä¸€æ¬¡ï¼Œæ¯æ¬¡æŒç»­ç›‘æ§ 45 åˆ†é’Ÿï¼‰ã€‚

### æ–¹å¼äºŒï¼šDocker / Zeabur (æ¨è)

ä»£ç æ¨é€åˆ° `main` åˆ†æ”¯ä¼šè‡ªåŠ¨æ„å»ºé•œåƒåˆ° GHCRã€‚

1.  **éƒ¨ç½²**ï¼šåœ¨ Zeabur æˆ– Docker ç¯å¢ƒä¸­ä½¿ç”¨é•œåƒ `ghcr.io/ä½ çš„ç”¨æˆ·å/nsfw_monitor:latest`ã€‚
2.  **ç¯å¢ƒå˜é‡**ï¼š
    *   `DISCARD_WEBHOOK`: Discord Webhook åœ°å€ã€‚
    *   `DISCARD_SWITCH`: `ON`ã€‚
    *   `TZ`: `Asia/Shanghai` (é»˜è®¤å·²è®¾)ã€‚
3.  **æ•°æ®æŒä¹…åŒ–é…ç½® (Zeabur ç¤ºä¾‹)**ï¼š
    *   åœ¨ Zeabur æœåŠ¡é¡µé¢ï¼Œç‚¹å‡» **Data Storage** (æˆ– Volumes)ã€‚
    *   ç‚¹å‡» **Add Volume**ã€‚
    *   **Mount Path (æŒ‚è½½è·¯å¾„)**: å¡«å†™ `/app/articles.db` (æ³¨æ„ï¼šè¿™é‡Œç›´æ¥æŒ‚è½½æ–‡ä»¶è·¯å¾„)ã€‚
    *   é‡å¯æœåŠ¡å³å¯ã€‚

    > **æ³¨æ„**ï¼šå¦‚æœä¸é…ç½®æŒ‚è½½å·ï¼ŒDocker å®¹å™¨é‡å¯å `articles.db` ä¼šé‡ç½®ï¼Œé€šè¿‡ RSS æ¨é€è¿‡çš„æ—§æ–‡ç« å¯èƒ½ä¼šè¢«å†æ¬¡æ¨é€ã€‚

```bash
# Docker æ‰‹åŠ¨è¿è¡Œç¤ºä¾‹
docker run -d \
  -e DISCARD_WEBHOOK="https://discord.com/api/webhooks/..." \
  -e DISCARD_SWITCH="ON" \
  -v $(pwd)/articles.db:/app/articles.db \
  ghcr.io/adminlove520/nsfw_monitor:latest
```

---

## ğŸ“œ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ Rss_monitor.py          # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ rss.yaml                # RSS æºé…ç½®æ–‡ä»¶
â”œâ”€â”€ config.yaml             # æ¨é€æœåŠ¡çš„æœ¬åœ°é…ç½®æ–‡ä»¶ (å¯é€‰)
â”œâ”€â”€ articles.db             # SQLite æ•°æ®åº“ (è‡ªåŠ¨ç”Ÿæˆ)
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ notify.py           # æ¨é€é€»è¾‘ (Discord Embed)
â”‚   â”œâ”€â”€ rss.py              # RSS è§£æä¸é‡è¯•é€»è¾‘
â”‚   â”œâ”€â”€ config.py           # é…ç½®åŠ è½½
â”‚   â””â”€â”€ db.py               # æ•°æ®åº“åˆå§‹åŒ–
â””â”€â”€ .github/workflows/
    â”œâ”€â”€ rss_monitor.yml     # ç›‘æ§ä»»åŠ¡å·¥ä½œæµ
    â”œâ”€â”€ deploy-image.yml    # Docker é•œåƒæ„å»ºå·¥ä½œæµ
    â””â”€â”€ version-bump.yml    # è‡ªåŠ¨ç‰ˆæœ¬ç®¡ç†å·¥ä½œæµ
```

## ğŸ“ è®¸å¯è¯

MIT License
